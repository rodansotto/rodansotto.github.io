$(function(){function o(){$.ajax({method:"GET",url:t,success:s,error:function(){$("#buttonConnect").text("Connect");$("#buttonConnect").removeAttr("disabled").focus()}})}function s(n){$("#buttonConnect").text("Connect");i=n;console.log("userID: "+i);h();c();u("<span class='label label-success'>Connected<\/span><br /><br />")}function h(){console.log("userID: "+i);n=new EventSource(t+"\\"+i);n.onopen=function(){console.log("Connection to server opened.")};n.onmessage=function(n){if(n.data){var t=n.data.split(":"),r=t[0],i=t[1],f=i.split("\n");u("<span class='badge'>"+r+":<\/span> "+i+"<br />")}};n.onerror=function(){console.log("eventSource.onerror");e()}}function c(){$("#buttonConnect").attr("disabled","disabled");$("#buttonDisconnect").removeAttr("disabled");$("#textMessage").removeAttr("disabled").focus();$("#buttonSend").removeAttr("disabled")}function e(){l();a();u("<br /><span class='label label-danger'>Disconnected<\/span><br />")}function l(){console.log("eventSource: "+n);n&&n.close()}function a(){$("#buttonConnect").removeAttr("disabled").focus();$("#buttonDisconnect").attr("disabled","disabled");$("#textMessage").attr("disabled","disabled");$("#buttonSend").attr("disabled","disabled")}function v(){$.ajax({method:"POST",url:t,contentType:"application/json",data:'"'+r+":"+$("#textMessage").val()+'"'})}function u(n){$("#divMessages").append(n);var t=document.getElementById("divMessages");t.scrollTop=t.scrollHeight-t.clientHeight}var t,f,r,i,n;if(typeof EventSource=="undefined"){alert("Sorry, your browser does not support server-sent events.  Please try Chrome.");return}t="http://www.rodansotto.com/mvc5/api/ChatMessageSSE";$("#spanUserName").text("");$("#divMessages").html("");f=Math.round(Math.random()*100);r=prompt("Please enter a user name: ","User"+f);$("#spanUserName").text(r);$("#buttonConnect").click(function(){$("#buttonConnect").text("Connecting...");$("#buttonConnect").attr("disabled","disabled");o()});$("#buttonDisconnect").click(function(){e()});$("#buttonSend").click(function(){v();$("#textMessage").val("")});$("#textMessage").keydown(function(n){if(n.keyCode==13)return $("#buttonSend").click(),!1})});
//# sourceMappingURL=groupchat_sse.min.js.map